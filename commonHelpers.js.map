{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n  const datetimePicker = document.getElementById('datetime-picker');\n  const startButton = document.querySelector('button[data-start]');\n  const daysSpan = document.querySelector('[data-days]');\n  const hoursSpan = document.querySelector('[data-hours]');\n  const minutesSpan = document.querySelector('[data-minutes]');\n  const secondsSpan = document.querySelector('[data-seconds]');\n  let userSelectedDate = null;\n  let timerInterval = null;\n\n  const options = {\n      enableTime: true,\n      time_24hr: true,\n      defaultDate: new Date(),\n      minuteIncrement: 1,\n      onClose(selectedDates) {\n          const selectedDate = selectedDates[0];\n          if (selectedDate <= new Date()) {\n              iziToast.error({\n                  title: 'Error',\n                  message: 'Please choose a date in the future',\n              });\n              startButton.disabled = true;\n          } else {\n              userSelectedDate = selectedDate;\n              startButton.disabled = false;\n          }\n      },\n  };\n\n  flatpickr(datetimePicker, options);\n\n  startButton.addEventListener('click', () => {\n      startButton.disabled = true;\n      datetimePicker.disabled = true;\n\n      timerInterval = setInterval(() => {\n          const now = new Date();\n          const timeDifference = userSelectedDate - now;\n\n          if (timeDifference <= 0) {\n              clearInterval(timerInterval);\n              updateTimer(0);\n              datetimePicker.disabled = false;\n              startButton.disabled = true;\n              iziToast.success({\n                  title: 'Success',\n                  message: 'Countdown finished',\n              });\n          } else {\n              updateTimer(timeDifference);\n          }\n      }, 1000);\n  });\n\n  function updateTimer(ms) {\n      const time = convertMs(ms);\n      daysSpan.textContent = addLeadingZero(time.days);\n      hoursSpan.textContent = addLeadingZero(time.hours);\n      minutesSpan.textContent = addLeadingZero(time.minutes);\n      secondsSpan.textContent = addLeadingZero(time.seconds);\n  }\n\n  function convertMs(ms) {\n      const second = 1000;\n      const minute = second * 60;\n      const hour = minute * 60;\n      const day = hour * 24;\n\n      const days = Math.floor(ms / day);\n      const hours = Math.floor((ms % day) / hour);\n      const minutes = Math.floor(((ms % day) % hour) / minute);\n      const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n      return { days, hours, minutes, seconds };\n  }\n\n  function addLeadingZero(value) {\n      return String(value).padStart(2, '0');\n  }\n});"],"names":["datetimePicker","startButton","daysSpan","hoursSpan","minutesSpan","secondsSpan","userSelectedDate","timerInterval","options","selectedDates","selectedDate","timeDifference","updateTimer","ms","time","convertMs","addLeadingZero","days","hours","minutes","seconds","value"],"mappings":"wFAAA,SAAS,iBAAiB,mBAAoB,IAAM,CAClD,MAAMA,EAAiB,SAAS,eAAe,iBAAiB,EAC1DC,EAAc,SAAS,cAAc,oBAAoB,EACzDC,EAAW,SAAS,cAAc,aAAa,EAC/CC,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAc,SAAS,cAAc,gBAAgB,EAC3D,IAAIC,EAAmB,KACnBC,EAAgB,KAEpB,MAAMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACnB,MAAMC,EAAeD,EAAc,CAAC,EAChCC,GAAgB,IAAI,MACpB,SAAS,MAAM,CACX,MAAO,QACP,QAAS,oCAC3B,CAAe,EACDT,EAAY,SAAW,KAEvBK,EAAmBI,EACnBT,EAAY,SAAW,GAE9B,CACP,EAEE,UAAUD,EAAgBQ,CAAO,EAEjCP,EAAY,iBAAiB,QAAS,IAAM,CACxCA,EAAY,SAAW,GACvBD,EAAe,SAAW,GAE1BO,EAAgB,YAAY,IAAM,CAE9B,MAAMI,EAAiBL,EADX,IAAI,KAGZK,GAAkB,GAClB,cAAcJ,CAAa,EAC3BK,EAAY,CAAC,EACbZ,EAAe,SAAW,GAC1BC,EAAY,SAAW,GACvB,SAAS,QAAQ,CACb,MAAO,UACP,QAAS,oBAC3B,CAAe,GAEDW,EAAYD,CAAc,CAEjC,EAAE,GAAI,CACb,CAAG,EAED,SAASC,EAAYC,EAAI,CACrB,MAAMC,EAAOC,EAAUF,CAAE,EACzBX,EAAS,YAAcc,EAAeF,EAAK,IAAI,EAC/CX,EAAU,YAAca,EAAeF,EAAK,KAAK,EACjDV,EAAY,YAAcY,EAAeF,EAAK,OAAO,EACrDT,EAAY,YAAcW,EAAeF,EAAK,OAAO,CACxD,CAED,SAASC,EAAUF,EAAI,CAMnB,MAAMI,EAAO,KAAK,MAAMJ,EAAK,KAAG,EAC1BK,EAAQ,KAAK,MAAOL,EAAK,MAAO,IAAI,EACpCM,EAAU,KAAK,MAAQN,EAAK,MAAO,KAAQ,GAAM,EACjDO,EAAU,KAAK,MAASP,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAI,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACzC,CAED,SAASJ,EAAeK,EAAO,CAC3B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACvC,CACH,CAAC"}